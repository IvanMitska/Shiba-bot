# Настройка домена для партнерской программы SHIBA-CARS

## Требования

1. **Домен для лендинга** - отдельный домен для партнерских ссылок (например: shiba-partners.com)
2. **SSL сертификат** - обязателен для работы с Telegram Web App

## Конфигурация

### 1. Переменные окружения в Railway

Добавьте следующие переменные в настройках Railway:

```env
# Основной домен приложения (автоматически от Railway)
DOMAIN=https://shibo-tg.up.railway.app

# Домен для партнерских ссылок
LANDING_DOMAIN=https://your-domain.com

# Секретный ключ для JWT
JWT_SECRET=your_super_secret_key_change_this

# ID администраторов в Telegram (через запятую)
ADMIN_TELEGRAM_IDS=123456789,987654321
```

### 2. Настройка DNS

Для вашего домена лендинга настройте:

1. **A запись** - укажите на IP сервера Railway
2. **CNAME запись** - укажите на your-app.up.railway.app

### 3. Формат партнерских ссылок

После настройки партнеры будут получать ссылки вида:
```
https://your-domain.com/r/ABC12345
```

Где ABC12345 - уникальный код партнера.

## Проверка работы

### 1. Проверка API

```bash
curl https://shibo-tg.up.railway.app/health
```

### 2. Проверка партнерской ссылки

Откройте в браузере:
```
https://your-domain.com/r/TEST123
```

Должна открыться страница лендинга.

## Статистика

Партнеры могут отслеживать:
- **Общее количество кликов** - все переходы по ссылке
- **Клики сегодня** - переходы за текущий день
- **WhatsApp клики** - переходы в WhatsApp
- **Telegram клики** - переходы в Telegram
- **География** - страны и города посетителей

## Безопасность

1. Обязательно смените `JWT_SECRET` на случайную строку
2. Используйте HTTPS для всех доменов
3. Регулярно проверяйте логи на подозрительную активность

## Поддержка

При возникновении проблем проверьте:
1. Логи в Railway Dashboard
2. Статус базы данных
3. Корректность переменных окружения